# è®¤è¯†ä¸æ„Ÿå— Rust çš„çº¢ä¸é»‘

## å†™åœ¨å‰é¢

> ä½ å¦‚ä»Šçš„æ°”è´¨é‡Œï¼Œè—ç€ä½ èµ°è¿‡çš„è·¯ã€è¯»è¿‡çš„ä¹¦ã€çˆ±è¿‡çš„äººï¼Œä»¥åŠå­¦ä¹ è¿‡çš„ç¼–ç¨‹è¯­è¨€ ğŸ˜„

![img](./insights_about_rust.assets/intro.png)

> ğŸ˜ è¶£å›¾é•‡æ¥¼ï½ by [@Folyd](https://folyd.com/about/)

> **é¢˜å¤–è¯**ï¼šæ¬¢è¿ä¸€èµ·äº¤æµ&åŠ å…¥æˆ‘ä»¬å›¢é˜Ÿ ğŸ˜

## å¸Œæœ›èƒ½è§£ç­”çš„é—®é¢˜

1. å‰æœŸè°ƒç ”ï¼šæ„Ÿå— Rust æ˜¯ä¸€é—¨ä»€ä¹ˆæ ·çš„ç¼–ç¨‹è¯­è¨€
2. Rust ç›®å‰çš„å‘å±•çŠ¶å†µ
3. æ˜¯å¦çœŸçš„æœ‰å¿…è¦äº†è§£æˆ–å­¦ä¹ 

- ï¼ˆå­¦ä¸åŠ¨äº† ğŸŒ«ï¸

## ä¸å¤ªèƒ½è§£ç­”çš„é—®é¢˜

1. æŒæ¡ç”šè‡³å…¥é—¨ Rust

- è‹¥æœ‰æ„è¿›ä¸€æ­¥å­¦ä¹ ï¼Œå¯è·³è½¬æ–‡æ¡£åº•éƒ¨[å‚è€ƒ]
- è‹¥æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯éšæ—¶è¯„è®ºäº¤æµ

## Takeaway

> ä¸€é—¨èµ‹äºˆæ¯ä¸ªäººæ„å»ºå¯é ä¸”é«˜æ•ˆè½¯ä»¶èƒ½åŠ›çš„è¯­è¨€ã€‚â€”â€” [Rust ç¨‹åºè®¾è®¡è¯­è¨€](https://www.rust-lang.org/zh-CN/)

- Rust ååˆ†é‡è§†ä¸å¼ºè°ƒå¼€å‘è€…**ç”¨æˆ·ä½“éªŒ**ï¼Œæ‹¥æœ‰**å‹å¥½**çš„ç¼–è¯‘å™¨å’Œæ¸…æ™°æ˜ç¡®çš„é”™è¯¯æç¤ºä¸å®Œæ•´çš„æ–‡æ¡£
- Rust é‡‡ç”¨å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿ+æ‰€æœ‰æƒæœºåˆ¶ï¼Œå…¼å…·ä¼˜å¼‚çš„**æ€§èƒ½**ã€**å®‰å…¨**ä¸ä¸°å¯Œçš„è¯­è¨€æŠ½è±¡**è¡¨ç°åŠ›**
- Rust æ˜¯ä¸€é—¨ç³»ç»Ÿçº§çš„**é€šç”¨**ç¼–ç¨‹è¯­è¨€ï¼Œ**åº”ç”¨é¢†åŸŸå¹¿æ³›**ï¼šåµŒå…¥å¼ã€æ“ä½œç³»ç»Ÿï¼ŒåŒºå—é“¾ã€æ•°æ®å¤„ç†åˆ°ç½‘ç»œåº”ç”¨ã€UI ç¼–ç¨‹ã€æ¸¸æˆç­‰
- ä¸ªäººä½“ä¼šï¼š
  - Rust åƒä¸€ä¸ª**å§‹ç»ˆåœ¨çº¿**ä¸”**ä¸¥æ ¼**çš„**ä¼˜ç§€**å¯¼å¸ˆï¼Œå¼•å¯¼æˆ‘å†™å‡ºæ›´å¯é è€Œé«˜æ•ˆçš„ä»£ç 
  - æŒæ¡äº† Swift å­¦ä¹  Rustï¼Œè¿ç§»èµ·æ¥éå¸¸è‡ªç„¶ï¼Œä¸”æœ‰åŠ©äºæ›´æ·±å…¥ç†è§£ Swift
  - C/C++ çš„æ€§èƒ½ + Swift çš„å®‰å…¨ä¿éšœä¸è¡¨ç°åŠ›

### ğŸš¦Rust çš„è´Ÿé¢å› ç´ 

- å¯¹äºé“¾è¡¨è¿™æ ·å­˜åœ¨ç¯çš„æ•°æ®ç»“æ„ï¼Œå®ç°èµ·æ¥éå¸¸è´¹åŠ²ï¼ˆ[é“¾æ¥å‚è€ƒ](https://rust-unofficial.github.io/too-many-lists/)ï¼‰
- ç¼–è¯‘æ—¶é—´ç›¸æ¯”å…¶ä»–ç»å¤§å¤šæ•°è¯­è¨€è¦æ…¢ï¼Œç¼–è¯‘å™¨æ£€æŸ¥å’Œå…¨å±€æ€§ä¼˜åŒ–
- ç¼–è¯‘å™¨è¿‡äºä¸¥æ ¼ï¼Œç”šè‡³æ˜¯å•°å—¦ï¼Œè™½ç„¶é”™è¯¯æç¤ºéå¸¸å‹å¥½ï¼Œä½†ä»éœ€è¦èŠ±æ—¶é—´é€‚åº”
- æ•´ä¸ªè¯­è¨€ä½“ç³»éå¸¸å¤æ‚ï¼Œé™¤äº†æä¸ºä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿï¼Œè¿˜å¼•å…¥äº†è¯¸å¤šæ–°è¯­è¨€ç‰¹æ€§å’Œæ¦‚å¿µ
  - å¾ªå¾ªæ¸è¿›åœ°äº†è§£
- ç›®å‰æ¥çœ‹ï¼Œç¤¾åŒºæ•´ä½“è¿˜è¾ƒæ–°çš„åŒæ—¶ï¼ŒRust ç‹‚çƒ­çˆ±å¥½è€…ä¼šæ˜¾å¾—è¿‡äºè¿½æ§å’Œæ¿€è¿›ï¼ˆé‡æ„ä¸€åˆ‡ä¸»ä¹‰ğŸ™…â€â™‚ï¸ï¼‰
  - å› åœ°åˆ¶å®œï¼Œæƒè¡¡å–èˆï¼Œæ¶¦ç‰©ç»†æ— å£°



# **å‡†å¤‡å·¥å…·é›†**

- Rust (é‡‡ç”¨ Rustup å®‰è£…)
  - æ¨è: [RsProxy](https://rsproxy.cn/) é•œåƒ By Bytedance.
- VSCode + [rust-analyzer](https://rust-analyzer.github.io/manual.html#vs-code) [+ crates]
- [Rust Search Extension](https://rust.extension.sh/)ï¼ˆå¯é€‰&å¼ºçƒˆæ¨èï¼‰

# Rust åˆä½“éªŒ

é‡‡ç”¨ [Rust Playground](https://play.rust-lang.org/) å¿«é€Ÿä½“éªŒ

- ### [Hello World](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2021&gist=a0e2835842ac277af8a7f2bebe162239)

```Rust
fn hello(name: Option<&str>) {

    match name {

        Some(name) => println!("Hello, {}!", name),

        None => println!("Hello, World!"),

    }

}



fn main() {

    hello(None);

    hello(Some("Binlogo"));

}
```

- ç±»å‹ç³»ç»Ÿå¼ºå¤§ï¼Œæ—  `null` å’Œ `void *` ç­‰ç±»å‹
- `Option` ç±»å‹ç”¨äºè¡¨è¾¾`ç©º`ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯

- ### [ç¿»è½¬å­—ç¬¦ä¸²](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=9f9e2c47850eafb70d5b9b1f82c4c85c)

```Rust
fn reverse(input: &str) -> String {

    input.chars().filter(|c| !c.is_whitespace()).rev().collect()

}



fn main() {

    let s = "a1  b2  cdefg";

    println!("{}", reverse(&s));

}
```

- ä»£ç æŠ½è±¡ç¨‹åº¦é«˜ï¼Œè¡¨è¾¾åŠ›å¼º
- é«˜é˜¶å‡½æ•°æ”¯æŒ
- å®ç°ä»¥ä¸Šä¸¤ç‚¹çš„åŒæ—¶ï¼Œæ²¡æœ‰è¿è¡Œæ—¶æ¶ˆè€—ï¼ˆé›¶æˆæœ¬æŠ½è±¡ï¼‰

# Rust çš„ç›®æ ‡ä¸è®¾è®¡ç†å¿µ

- **å®ç”¨**çš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€

- åŒæ—¶è¿½æ±‚**å®‰å…¨**ã€**å¹¶å‘**ã€**é«˜æ€§èƒ½**

- æ˜¾å¼é«˜äºéšå¼

- è¿è¡Œæ—¶è¡Œä¸ºå¯é¢„æµ‹

![img](./insights_about_rust.assets/20211228215513874.png)

> å›¾æºï¼šhttps://tyrchen.github.io/rust-training/rust-training-all-in-one-cn.html#12

![img](./insights_about_rust.assets/20211228215701271.png)

> å›¾æºï¼šhttps://livebook.manning.com/book/rust-in-action/chapter-1/121

## å®‰å…¨

- ç±»å‹ç³»ç»Ÿ
  - ç¼–è¯‘å™¨æ£€æŸ¥ï¼Œæš´éœ²éšå«é”™è¯¯

- ç¼–è¯‘å™¨è·å–æ›´å¤šä¿¡æ¯ï¼Œåˆ©äºä¼˜åŒ–

- å¢å¼ºå¯è¯»æ€§ï¼Œä»£ç è¡¨è¾¾æ€§å¼º

- æ‰€æœ‰æƒç³»ç»Ÿï¼šæ¯ä¸ªè¢«åˆ†é…çš„å†…å­˜éƒ½æœ‰ä¸€ä¸ªç‹¬å å…¶æ‰€æœ‰æƒçš„æŒ‡é’ˆ

- å€Ÿç”¨å’Œç”Ÿå‘½å‘¨æœŸï¼šæ¯ä¸ªå˜é‡éƒ½æœ‰å…¶ç”Ÿå‘½å‘¨æœŸï¼Œå€Ÿç”¨å¯é€šè¿‡æ ‡è®°ç”Ÿå‘½å‘¨æœŸä¾›ç¼–è¯‘æ£€æŸ¥

### å¦‚ä½•å®ç°å†…å­˜å®‰å…¨ï¼Ÿ

- **äººå·¥ç®¡ç†**ï¼šC/C++ï¼Œéš¾å¤„ç†ï¼Œæ˜“å‡ºé”™
- **æ™ºèƒ½æŒ‡é’ˆ**ï¼šC++/Objc/Swiftï¼Œæ€§èƒ½æŸå¤±ï¼Œå¾ªç¯å¼•ç”¨é—®é¢˜
- **åƒåœ¾å›æ”¶**ï¼šJavaï¼Œå¤§é‡å†…å­˜æ¶ˆè€—ï¼Œä¸å¿…è¦çš„å †å†…å­˜åˆ†é…
- **æ‰€æœ‰æƒæ¨¡å‹ï¼ˆOwnershipï¼‰**ï¼šRustï¼Œå­¦ä¹ æ›²çº¿&ç†è§£æˆæœ¬

### å¦‚ä½•å®ç°å¹¶å‘å®‰å…¨ï¼Ÿ

- å•çº¿ç¨‹

  ï¼šJavaScript

  - æœ€å®‰å…¨çš„å¹¶å‘æ–¹å¼ï¼Œä½†æ— æ³•åˆ©ç”¨å¤šæ ¸æ€§èƒ½

- å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰

  ï¼šPython/Ruby

  - å…¨å±€é”ï¼Œä»¥æ€§èƒ½æ¢å®‰å…¨
  - é”ç²’åº¦è¿‡å¤§

- Actor Model

  ï¼šErlang/Swift(> 5.5)

  - é€šè¿‡æ¶ˆæ¯åŒæ­¥ï¼ˆactor -> actor)
  - é¢å¤–å†…å­˜æ‹·è´å’Œå †å†…å­˜åˆ†é…

- Communicating Sequential Process (CSP)

  ï¼šGolang

  - é€šè¿‡æ¶ˆæ¯åŒæ­¥ï¼ˆcoroutine -> channel -> coroutine)
  - é¢å¤–å†…å­˜æ‹·è´å’Œå †å†…å­˜åˆ†é…

- **æ‰€æœ‰æƒæ¨¡å‹ + ç±»å‹ç³»ç»Ÿ**

  ï¼šRust

  - é€šè¿‡ç±»å‹å®‰å…¨ä¿è¯
  - æ— æ€§èƒ½æŸå¤±ï¼Œä¸”å¯ä»¥ä¸å…¶ä»–æ–¹å¼å…¼å®¹ï¼Œå¦‚ `std::sync::mpsc` 

## é›¶æˆæœ¬æŠ½è±¡ï¼ˆæ€§èƒ½ï¼‰

```Rust
// Rust

fn main() {

    6.times(|_| println!("6"));

}



pub trait Times where Self: Sized {

    fn times<F: FnMut(Self)>(&self, closure: F);

}



macro_rules! impl_times {

    ($ptype:ty) => {

        impl Times for $ptype {

            fn times<F: FnMut($ptype)>(&self, mut closure: F) {

                for i in 0..*self {

                    closure(i)

                }

            }

        }

    }

}



impl_times!(i8);

impl_times!(u8);

impl_times!(i16);

impl_times!(u16);

impl_times!(i32);

impl_times!(u32);

impl_times!(i64);

impl_times!(u64);

impl_times!(usize);
```

- ä¸å­˜åœ¨è¿è¡Œæ—¶æ€§èƒ½å¼€é”€ï¼Œç¼–è¯‘æ—¶å®Œæˆ
- è¯­è¨€ç‰¹æ€§åŸºçŸ³ï¼šæ³›å‹å’Œ `trait`

### æ€§èƒ½å¯¹æ¯”

![img](./insights_about_rust.assets/20211228215755814.png)

> æ¥æºï¼š[Swift vs Rust - Which programs are fastest? | Computer Language Benchmarks Game](https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/swift-rust.html)

## å®ç”¨æ€§

- å‹å¥½çš„ FFI æ”¯æŒï¼Œå¯ä»¥å¾ˆå¥½åˆ©ç”¨å·²æœ‰ C/C++ ç­‰ç”Ÿæ€

- åŒ…ç®¡ç†å™¨ Cargo åŠå…¶**ä¸€è‡´çš„å·¥ä½œæµ**

- å¼ºå¤§æ™ºèƒ½çš„ç¼–è¯‘å™¨é”™è¯¯æç¤ºæœºåˆ¶

### å·¥å…·é“¾

- Rustup

  : å·¥å…·é“¾å®‰è£…ä¸ç‰ˆæœ¬ç®¡ç†

  - rustc - Rust ç¼–è¯‘å™¨
  - **cargo** - Rust æ„å»ºä¸åŒ…ç®¡ç†å·¥å…·
    - ä¸¤ä¸ªå…³é”®æ–‡ä»¶ï¼š`Cargo.toml` å’Œ `Cargo.lock`
    - `cargo build` â€”â€” ç¼–è¯‘
    - `cargo run` â€”â€” è¿è¡Œ
    - `cargo test` â€”â€” æµ‹è¯•
    - `cargo tree` â€”â€” è§£æä¾èµ–æ ‘
    - æ›´å¤šï¼š[The Cargo Book](https://doc.rust-lang.org/cargo/index.html)
  - rustdoc - Rust æ–‡æ¡£å·¥å…·
  - rust-(lldb|gdb)
  - libcore/libstd 

- å¸¸ç”¨å‘½ä»¤

  - `rustup install stable`
  - `rustup default stable`
  - `rustup doc [--std]`
  - `rustup override set stable`
  - `rustup target list`
  - `rustup target add armv7-apple-ios` - æ·»åŠ äº¤å‰ç¼–è¯‘çš„ç›®æ ‡æ”¯æŒ

- æ·»åŠ å…¶ä»–è¾…åŠ©å·¥å…·

  - `rustup component add rustfmt` - Rust ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–
  - `rustup component add clippy` - Rust ä»£ç æ£€æŸ¥ä¸ä¼˜åŒ–

### ä¸°å¯Œçš„æ–‡æ¡£

> [Learn Rust](https://www.rust-lang.org/learn)

- å®˜æ–¹æŒ‡å—
  - [Rust ç¨‹åºè®¾è®¡è¯­è¨€](https://doc.rust-lang.org/book/)
  - [Rustlings](https://github.com/rust-lang/rustlings/) - Rust ç»ƒä¹ é›†
  - [é€šè¿‡ç¤ºä¾‹å­¦ Rust](https://doc.rust-lang.org/stable/rust-by-example/)
- æ ¸å¿ƒæ–‡æ¡£
  - [æ ‡å‡†åº“](https://doc.rust-lang.org/std/index.html) - Rust æ ‡å‡†åº“ API æ‰‹å†Œ
  - [ç‰ˆæœ¬æŒ‡å—](https://doc.rust-lang.org/edition-guide/index.html)
  - [Cargo æ‰‹å†Œ](https://doc.rust-lang.org/cargo/index.html) - Rust åŒ…ç®¡ç†å™¨ä¸æ„å»ºç³»ç»Ÿ
  - [Rustdoc æ‰‹å†Œ](https://doc.rust-lang.org/rustdoc/index.html)
  - [ç¼–è¯‘é”™è¯¯ç´¢å¼•è¡¨](https://doc.rust-lang.org/error-index.html)  - æ·±å…¥è§£é‡Šå¯èƒ½é‡åˆ°çš„ç¼–è¯‘é”™è¯¯
- è¿›é˜¶æ–‡æ¡£
  - [Rust å‚è€ƒæ‰‹å†Œ](https://doc.rust-lang.org/reference/index.html) - æ·±å…¥è¯­è¨€è®¾è®¡åŸç†ä¸å®ç°ç»†èŠ‚
  - [Rust é»‘é­”æ³•æ‰‹å†Œ](https://doc.rust-lang.org/nomicon/index.html) - å¦‚ä½•æ›´çµæ´»åœ°åº”ç”¨ã€Œä¸å®‰å…¨ã€çš„ Rust
  - [æœªç¨³å®šç‰¹æ€§æ‰‹å†Œ](https://doc.rust-lang.org/nightly/unstable-book/index.html) - äº†è§£é€šè¿‡ç‰¹æ€§å¼€å…³å¼€å¯çš„è¯­è¨€ç‰¹æ€§
- é™¤æ­¤ä»¥å¤–ï¼Œæ‰€æœ‰çš„ä¸‰æ–¹åº“éƒ½æœ‰ä¸€è‡´çš„å‘å¸ƒå¹³å°å’Œæ–‡æ¡£ä¸­å¿ƒï¼š
  - [crates.io: Rust Package Registry](https://crates.io/)
  - [Docs.rs](https://docs.rs/)

### ç‰ˆæœ¬å…¼å®¹æ€§

- åŸºäºç‰ˆæ¬¡ï¼ˆEditionï¼‰çš„å¼•å…¥ï¼Œç¨³å®šç‰ˆ Rust å°†å§‹ç»ˆå‘åå…¼å®¹ã€‚â€”â€” **No Rust 2.0**
  - ä¸æ­¤åŒæ—¶ï¼Œ`cargo fix --edition` æ”¯æŒå¿«é€Ÿè¿ç§»

### è·¨å¹³å°ç‰¹æ€§

Rust æ˜¯å¯¹æ ‡ C/C++ çš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œç†è®ºä¸Šå¯ä»¥åº”ç”¨åˆ°å„ä¸ªé¢†åŸŸã€‚å°±ç§»åŠ¨ç«¯åº”ç”¨é¢†åŸŸè€Œè¨€ï¼Œç›®å‰è·¨å¹³å°çš„ç¼–ç¨‹è¯­è¨€ä»¥ C++ ä¸ºä¸»ï¼Œä¾‹å¦‚è¾ƒä¸ºä¸»æµçš„ Facebook çš„è·¨å¹³å°å¸ƒå±€æ¡†æ¶ Yogaï¼Œè…¾è®¯å¾®ä¿¡çš„è·¨å¹³å°ç½‘ç»œåº“ marsã€‚è€Œ Rust æ˜¯ä¸€é—¨å¯¹ FFI è‰¯å¥½æ”¯æŒçš„ç³»ç»Ÿçº§è¯­è¨€ï¼Œæ—¢èƒ½å¤Ÿå’Œ Swift/Kotlin ç­‰å¹³å°æ”¯æŒè¯­è¨€ä¸€æ ·æœ‰è‰¯å¥½çš„æŠ½è±¡å’Œè¡¨è¾¾æ€§ï¼Œåˆèƒ½å¤Ÿè¾¾åˆ° C/C++ çš„æ€§èƒ½çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥åœ¨ç¼–è¯‘æœŸä¿è¯å®‰å…¨ã€‚å› æ­¤ï¼Œå¦‚æœå›¢é˜Ÿåˆé€‚ï¼Œåˆæœ‰è·¨å¹³å°çš„å¼€å‘éœ€æ±‚ï¼Œé‚£ä¹ˆ Rust ä¼šæ˜¯ä¸ªä¸é”™çš„å¯é€‰é¡¹ã€‚

#### è¾ƒä¸ºæµè¡Œä¸æˆç†Ÿçš„è·¨å¹³å°å¼€æºé¡¹ç›®

- GitHub - mozilla/application-services: Firefox Application Services
  - Firefox çš„åº”ç”¨æœåŠ¡å±‚ï¼Œä¾› Android/iOS/Desktop å„ç«¯ä½¿ç”¨
- GitHub - signalapp/libsignal-client
  - Signal åº”ç”¨è·¨å¹³å°å±‚ï¼Œä¾› Android/iOS/Desktop å„ç«¯ä½¿ç”¨

# Rust çš„å·¥ä½œæµç¨‹ä¸ç¤¾åŒºç”Ÿæ€å»ºè®¾

å¼€æº[æ²»ç†](https://www.rust-lang.org/zh-CN/governance) Â· [ç¤¾åŒº](https://www.rust-lang.org/zh-CN/community)æ–‡åŒ–å»ºè®¾&é©±åŠ¨ Â· [åŸºé‡‘ä¼š](https://foundation.rust-lang.org/)æ”¯æŒ

- [RFC](https://github.com/rust-lang/rfcs)ï¼šRust ä¸­çš„æ¯ä¸ªé‡è¦å†³å®šéƒ½æ˜¯ä»å¾æ±‚æ„è§ç¨¿ï¼ˆRFCï¼‰å¼€å§‹çš„ã€‚ ä»»ä½•äººéƒ½å¯ä»¥å‚ä¸ææ¡ˆçš„è®¨è®ºï¼Œæƒè¡¡åˆ©å¼Šä»¥ä¾¿è¾¾æˆå…±è¯†ã€‚ å¯¹æ¯ä¸ªè¯­è¨€ç‰¹æ€§ï¼Œç¤¾åŒºéƒ½é›†æ€å¹¿ç›Šã€æ·±æ€ç†Ÿè™‘ï¼Œä¿è¯ Rust é«˜è´¨é‡è¿­ä»£ã€‚
- é€šè¿‡ RFC æµç¨‹æœºåˆ¶ï¼Œåˆ¶å®š[å¹´åº¦è·¯çº¿å›¾](https://github.com/rust-lang/rfcs/blob/master/text/3037-roadmap-2021.md)ï¼šç¡®ä¿ç ”å‘æµç¨‹çš„ä¸“æ³¨

## å›¢é˜Ÿæ„æˆä¸åˆ†å·¥ï¼š

| æ ¸å¿ƒå›¢é˜Ÿ       | å…³æ³¨é¡¹ç›®çš„æ•´ä½“åŠè·¨é¢†åŸŸæ–¹å‘ï¼Œç®¡ç†å­å·¥ä½œç»„ã€‚                   |
| -------------- | ------------------------------------------------------------ |
| ç¤¾åŒºå›¢é˜Ÿ       | åè°ƒå¹¶æ”¯æŒæ´»åŠ¨ï¼Œè¿è¥ RustBridge é¡¹ç›®ä»¥åŠå¼€å±•è°ƒæŸ¥ç ”ç©¶ã€‚       |
| ç¼–è¯‘å™¨å›¢é˜Ÿ     | ç¼–è¯‘å™¨å†…éƒ¨ç»“æ„å’Œä¼˜åŒ–                                         |
| Crates.io å›¢é˜Ÿ | ç®¡ç† [crates.io](https://crates.io/) ï¼ˆç¤¾åŒºä¸‰æ–¹åº“ï¼‰çš„è¿ç»´ã€å¼€å‘å’Œç›¸å…³æ”¿ç­–ã€‚ |
| å¼€å‘å·¥å…·å›¢é˜Ÿ   | Rust å¼€å‘è€…å·¥å…·                                              |
| åŸºç¡€æ¶æ„å›¢é˜Ÿ   | Rust é¡¹ç›®è‡ªèº«æ‰€éœ€çš„å„ç§åŸºç¡€è®¾æ–½ï¼šæŒç»­é›†æˆã€ç‰ˆæœ¬ç®¡ç†ã€æœºå™¨äººå’Œæ€§èƒ½æŒ‡æ ‡ã€‚ |
| è¯­è¨€å›¢é˜Ÿ       | è®¾è®¡æ–°çš„è¯­è¨€ç‰¹æ€§                                             |
| åº“å›¢é˜Ÿ         | Rust æ ‡å‡†åº“ã€rust-lang åŒ…ã€ä»£ç çº¦å®šä»¥åŠç”Ÿæ€çš„æ”¯æŒã€‚          |
| å®¡æŸ¥å›¢é˜Ÿ       | å¸®åŠ©ç»´æŠ¤è¡Œä¸ºå‡†åˆ™                                             |
| å‘å¸ƒå›¢é˜Ÿ       | è·Ÿè¸ªå›å½’æµ‹è¯•ï¼Œç¨³å®šåŒ–å¹¶å‘å¸ƒ Rustã€‚                            |

- å›¢é˜Ÿä¸­çš„æ¯ä¸ªæˆå‘˜éƒ½å¯ä»¥é€šè¿‡ GitHub æ‰¾åˆ°ä»–ä»¬
- ã€Œ[è·¨å›¢é˜Ÿåä½œæ¬¢ä¹æ—¶å…‰](https://rust-ctcft.github.io/ctcft/)ã€ä¼šè®®ï¼šç±»ä¼¼å­—èŠ‚çš„æŠ€æœ¯åŒæœˆä¼š

# ç”Ÿäº§ç¯å¢ƒé‡‡ç”¨ Rust çš„ç”¨æˆ·å’Œäº§å“

> [Production users](https://www.rust-lang.org/production/users)

- Android - [Android Rust Introduction](https://source.android.com/setup/build/rust/building-rust-modules/overview)
- Atlassian - [Why we chose Rust as our programming language](https://bitbucket.org/blog/why-rust)
- Coursera - [Rust & Docker in production @ Coursera](https://medium.com/coursera-engineering/rust-docker-in-production-coursera-f7841d88e6ed)
- Dropbox - [Rewriting the heart of our sync engine](https://dropbox.tech/infrastructure/rewriting-the-heart-of-our-sync-engine)
- Figma - [How Mozillaâ€™s Rust dramatically improved our server-side performance](https://www.figma.com/blog/rust-in-production-at-figma/)
- Fuchsia OS - [Fuchisia Rust Introduction](https://fuchsia.dev/fuchsia-src/development/languages/rust)
- Sourcegraph - [Syntect Server](https://github.com/sourcegraph/sourcegraph/tree/main/docker-images/syntax-highlighter)
- Lark/é£ä¹¦ - [Rust è·¨å¹³å°å®¢æˆ·ç«¯å¼€å‘åœ¨å­—èŠ‚è·³åŠ¨çš„å®è·µ-InfoQ](https://www.infoq.cn/article/oh79weak7z3s2xavo*bv)
- npm, Inc - [Community makes Rust an easy choice for npm](https://www.rust-lang.org/static/pdfs/Rust-npm-Whitepaper.pdf)
- ......

# Rust æ ¸å¿ƒè¯­è¨€ç‰¹æ€§

## æ‰€æœ‰æƒ&å€Ÿç”¨è§„åˆ™

> Rust å†…å­˜ç®¡ç†çš„åŸºç¡€æ¨¡å‹

![img](./insights_about_rust.assets/20211228215849642.png)

> å›¾æºï¼šhttps://tyrchen.github.io/rust-training/rust-training-all-in-one-cn.html#39

å’Œåƒåœ¾å›æ”¶ã€è‡ªåŠ¨å¼•ç”¨è®¡æ•°ç±»ä¼¼ï¼Œåªæ˜¯ä¸€ç§å†…å­˜ç®¡ç†å’Œæ§åˆ¶çš„æ–¹å¼ï¼š

- ç»™äº†å†…å­˜å®‰å…¨+å¹¶å‘å®‰å…¨åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç©ºé—´
- ä»˜å‡ºäº†ç¼–ç æ—¶æ›´å¤šçš„è€ƒè™‘ï¼ˆå³ç¼–è¯‘å™¨æ›´å¤šé™åˆ¶ï¼‰

### æ‰€æœ‰æƒè§„åˆ™ï¼ˆOwnershipï¼‰

- ä¸€ä¸ªå€¼åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼ˆownerï¼‰
- æ‰€æœ‰æƒï¼ˆownershipï¼‰å¯ä»¥ä¼ é€’ï¼ˆmoveï¼‰ç»™å‡½æ•°å’Œå…¶ä»–å˜é‡
- æ‰€æœ‰è€…è´Ÿè´£ä»å†…å­˜ä¸­åˆ é™¤æ•°æ®
- æ‰€æœ‰è€…èƒ½å¤Ÿå¯¹æ•°æ®è¿›è¡Œä»»ä½•æ“ä½œå¹¶å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹

#### [ä»£ç ç¤ºä¾‹](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=3ce7843bec063a54c36330f9b9bed5e1)

```Rust
#[derive(Debug)]

struct Dot {

    id: String,

    x: i32,

    y: i32

}



fn main() {

    let dot = Dot { id: "dot_1".to_string(), x: 1, y: 2 }; 

    pacman(dot);

    // è‹¥å°è¯•å†æ¬¡è°ƒç”¨ï¼Œåˆ™æŠ¥é”™ï¼Œè§ä¸‹å›¾

    // pacman(dot);

}



fn pacman(dot: Dot) { 

    println!("Eating {:?}", dot);

    

}
```

![img](./insights_about_rust.assets/20211228215945158.png)

- ç¼–è¯‘é”™è¯¯ç´¢å¼•ï¼š[[E0382\]](https://doc.rust-lang.org/stable/error-index.html#E0382)

#### å†…å­˜ç”Ÿå‘½å‘¨æœŸç¤ºæ„

![img](./insights_about_rust.assets/20211228220010174.png)

- å½“ `pacman` å‡½æ•° returnï¼Œ`dot` å¯¹è±¡ï¼ˆå¦‚åŒå±€éƒ¨å˜é‡ä¸€æ ·ï¼‰å°†éšç€æ•´ä¸ªè°ƒç”¨æ ˆå¸§å›æ”¶é‡Šæ”¾(`drop`)

#### å¦‚ä½•å¤„ç†æ‰€æœ‰æƒè¢«è½¬ç§»çš„æƒ…å†µï¼ˆ[[E0382\]](https://doc.rust-lang.org/stable/error-index.html#E0382)ï¼‰

- ##### æ˜¾ç¤ºè°ƒç”¨ `.clone()` è¿›è¡Œå…‹éš†ï¼Œå¯¹å†…å­˜è¿›è¡Œæ‹·è´ä¼ é€’

```Rust
#[derive(Debug, Clone)]

struct Dot {

    id: String,

    x: i32,

    y: i32

}



fn main() {

    let dot = Dot { id: "dot_1".to_string(), x: 1, y: 2 }; 

    pacman(dot.clone());

    // å†æ¬¡è°ƒç”¨ï¼Œç¼–è¯‘é€šè¿‡ âœ…

    pacman(dot);

}



fn pacman(dot: Dot) { 

    println!("Eating {:?}", dot);

    

}
```

- ##### å¯¹æ•°æ®ç±»å‹å®ç° `Copy` traitï¼Œè¡¨æ˜è¯¥ç±»å‹å¯ä»¥ç®€å•é€šè¿‡ä½å¤åˆ¶åˆ›é€ å‰¯æœ¬

  - å®ç°äº† `Copy` trait çš„æ•°æ®ç±»å‹ï¼Œå°†é»˜è®¤é€šè¿‡ã€Œå€¼æ‹·è´ã€è¯­ä¹‰è¿›è¡Œå‚æ•°ä¼ é€’

```Rust
#[derive(Debug, Clone, Copy)]

struct Dot {

    id: String,

    x: i32,

    y: i32

}



fn main() {

    let dot = Dot { id: "dot_1".to_string(), x: 1, y: 2 }; 

    pacman(dot); // å®ç°äº† Copy traitï¼Œé»˜è®¤é€šè¿‡ã€Œå€¼æ‹·è´ã€ä¼ é€’

    // å†æ¬¡è°ƒç”¨ï¼Œç¼–è¯‘é€šè¿‡ âœ…

    pacman(dot);

}



fn pacman(dot: Dot) { 

    println!("Eating {:?}", dot);

    

}
```

- ##### é€šè¿‡å€Ÿç”¨ï¼ˆBorrowï¼‰ï¼Œåœ¨é¿å…æ‰€æœ‰æƒè½¬ç§»çš„æƒ…å†µä¸‹å…±ç”¨æ•°æ®

### å€Ÿç”¨ï¼ˆBorrowingï¼‰

> `&`ï¼šå€Ÿç”¨æ“ä½œç¬¦ï¼Œä¸å¼•ç”¨çš„åŒºåˆ«ï¼Œåœ¨äºã€Œå€Ÿç”¨ã€å—ä¸€å®šè§„åˆ™çº¦æŸ

- #### ä¸å¯å˜å€Ÿç”¨(`&`)

  - å¯å¤šæ¬¡å€Ÿç”¨ï¼Œä¸å¯å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹
  - å¼•ç”¨å°†å§‹ç»ˆæœ‰æ•ˆï¼Œä¸ä¼šä¸º null æˆ–é‡æŒ‡é’ˆï¼ˆå³ä¸ä¼šè¶…è¿‡æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼‰
  - å€Ÿç”¨çš„æœ‰æ•ˆæœŸé—´ï¼Œç¡®ä¿å¼•ç”¨çš„æ•°æ®ä¸ä¼šå‘ç”Ÿçªå˜

[ä»£ç ç¤ºä¾‹](https://play.rust-lang.org/?version=stable&edition=2018&code=%23[derive(Debug)] struct Point {    x%3A i32%2C    y%3A i32 } fn main() {    let mut p %3D Point { x%3A 1%2C y%3A 2 }%3B     inspect(%26p)%3B     p.x %3D 2%3B     inspect(%26p)%3B     } fn inspect(p%3A %26Point) {     println!("{%3A%3F}"%2C p)%3B })ï¼š

```Rust
#[derive(Debug)]

struct Point {

    x: i32,

    y: i32

}



fn main() {

    let mut p = Point { x: 1, y: 2 }; 

    inspect(&p); 

    p.x = 2; 

    inspect(&p);

    

}



fn inspect(p: &Point) { 

    println!("{:?}", p);

}
```

[ä»£ç ç¤ºä¾‹](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=d62bdd044f9f672592b2e9d51967f1fc)ï¼š

```Rust
#[derive(Debug)]

struct Point {

    x: i32,

    y: i32

}



fn main() {

    let mut point = Point { x: 1, y: 2 };

    let re = &point; // -\ 

    point.x = 2;     //  | 

    inspect(re);     // -/ 

}



fn inspect(p: &Point) { 

    println!("{:?}", p);

}
```

![img](./insights_about_rust.assets/20211228220040296.png)

- ç¼–è¯‘é”™è¯¯ç´¢å¼•ï¼š[[E0506\]](https://doc.rust-lang.org/stable/error-index.html#E0506)

- #### å¯å˜å€Ÿç”¨ï¼ˆ`&mut`ï¼‰

  - ä»…æ”¯æŒä¸€æ¬¡å¯å˜å€Ÿç”¨ï¼Œå¯å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹

```Rust
fn main() {

    let mut p = Point { x: 1, y: 2 };

    inspect(&p); 

    move_point(&mut p, 3, 3); 

    inspect(&p); 

}



fn move_point(

    p: &mut Point,  

    x: i32, y: i32

) {

    p.x = x;

    p.y = y;

}
```

- #### å€Ÿç”¨è§„åˆ™

  - å¤šæ¬¡ä¸å¯å˜å€Ÿç”¨
  - ä»…å•ä¸ªå¯å˜å€Ÿç”¨
  - ä»¥ä¸Šä¸¤è€…äº’æ–¥ï¼Œå³æ— æ³•å…±äº«å¯å˜æ€§
  - å€Ÿç”¨çš„ç”Ÿå‘½å‘¨æœŸæ— æ³•è¶…è¿‡å€¼æœ¬èº«çš„ç”Ÿå‘½å‘¨æœŸ

## ç”Ÿå‘½å‘¨æœŸ

> ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ªå¿ƒæ™ºè´Ÿæ‹…è¾ƒé‡çš„æ¦‚å¿µï¼Œä½†å¥½åœ¨å¤§å¤šæ•°æ—¶å€™ç¼–è¯‘å™¨ï¼Œéƒ½èƒ½è‡ªåŠ¨è¯†åˆ«ç”Ÿå‘½å‘¨æœŸï¼Œä¸éœ€è¦é¢å¤–æ ‡æ³¨ã€‚å¯å…ˆä»…ä½œäº†è§£ï¼Œåç»­å†æ·±å…¥ã€‚

- æè¿°æ ‡æ³¨å€Ÿç”¨çš„å€¼åœ¨å†…å­˜ä¸­å­˜æ´»çš„æ—¶é—´èŒƒå›´ï¼Œå³å˜é‡çš„æœ‰æ•ˆèŒƒå›´
- ä¸»è¦ä½œç”¨æ˜¯é¿å…æŒ‡é’ˆå¤±æ•ˆ/æ‚¬å‚å¼•ç”¨
- ä»…ä»…æ˜¯æè¿°å’Œæ ‡æ³¨ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨åšå®‰å…¨æ£€æŸ¥ï¼Œä¸ä¼šå¼ºåˆ¶æ”¹å˜å›ºæœ‰çš„ç”Ÿå‘½å‘¨æœŸé€»è¾‘
- è¯­æ³•ä¸Šï¼Œä¸èŒƒå‹ç›¸ä¼¼

### é™æ€ä¸åŠ¨æ€ç”Ÿå‘½å‘¨æœŸ

![img](./insights_about_rust.assets/20211228220105753.png)

- åˆ†é…åœ¨å †å’Œæ ˆä¸Šçš„å†…å­˜æœ‰å…¶å„è‡ªçš„**ä½œç”¨åŸŸ**ï¼Œç”Ÿå‘½å‘¨æœŸæ˜¯åŠ¨æ€çš„ã€‚
- å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å­—ç¬¦ä¸²å­—é¢é‡ã€ä»£ç ç­‰å†…å®¹ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè¢«ç¼–è¯‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼ŒåŠ è½½å…¥å†…å­˜ã€‚ç”Ÿå‘½å‘¨æœŸå’Œè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œç”Ÿå‘½å‘¨æœŸæ˜¯é™æ€çš„ã€‚
- å‡½æ•°æŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯é™æ€çš„ï¼Œå› ä¸ºå‡½æ•°åœ¨ Text æ®µä¸­ï¼Œåªè¦è¿›ç¨‹æ´»ç€ï¼Œå…¶å†…å­˜ä¸€ç›´å­˜åœ¨ã€‚

### ä»£ç ç¤ºä¾‹

```Rust
fn main() {

    let s1 = String::from("Lindsey");

    let s2 = String::from("Rosie");

    let result = max(&s1, &s2);

    println!("bigger one: {}", result);

}



fn max(s1: & str, s2: & str) -> &str {

    if s1 > s2 {

        s1

    } else {

        s2

    }

}
```

![img](./insights_about_rust.assets/20211228220130930.png)

- ç¼–è¯‘é”™è¯¯ç´¢å¼•ï¼š [[E0106\]](https://doc.rust-lang.org/stable/error-index.html#E0106): missing lifetime specifier

#### æ ¹æ®ç¼–è¯‘å™¨æŠ¥é”™å¼•å¯¼ï¼Œæ·»åŠ ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨

```Rust
fn max<'a>(s1: &'a str, s2: &'a str) -> &'a str
```

# Rust å®æˆ˜ï¼ˆLive Codingï¼‰

## rusty-todo-cliï¼šä»£åŠæ¸…å• CLI å·¥å…·

- åˆ›å»ºäº‹é¡¹ï¼š`add "Rust sharing for genius bytedancers"`
- æŸ¥çœ‹äº‹é¡¹åˆ—è¡¨ï¼š`list`
- å®Œæˆäº‹é¡¹: `done [index]`
- æŒä¹…åŒ–ï¼š
  - é€šè¿‡ JSON æ–‡ä»¶ä¿å­˜
  - é»˜è®¤è·¯å¾„ï¼šç”¨æˆ·ç›®å½•ï¼Œå¯é€‰æ–‡ä»¶è·¯å¾„æŒ‡å®š

1. ### åˆ›å»ºé¡¹ç›®

```Bash
cargo new rusty-todo-cli
```

1. ### ä¾èµ–å®‰è£…

```Rust
[package]

name = "rusty-todo-cli"

version = "0.1.0"

edition = "2021"



# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html



[dependencies]

anyhow = "1.0" # é”™è¯¯å¤„ç†

structopt = "0.3" # å‘½ä»¤å®šä¹‰

serde = { version = "1.0", features = ["derive"] } # åºåˆ—åŒ–/ååºåˆ—åŒ–

serde_json = "1.0" # JSON è§£æ

chrono = { version = "0.4", features = ["serde"] } # æ—¶é—´è§£æ

home = "0.5" # é»˜è®¤å­˜å‚¨ç›®å½•
```

1. ### å®šä¹‰å‘½ä»¤

> Doc: **[structopt - Rust](https://docs.rs/structopt/0.3.25/structopt/#how-to-derivestructopt)**

```Rust
use std::path::PathBuf;



pub enum Action {

    List,

    Add { text: String },

    Done { index: usize },

}



pub struct CommandLineOptions {

    action: Action,

    json_file_path: Option<PathBuf>,

}
```

- cli.rs

```Rust
use std::path::PathBuf;

use structopt::StructOpt;



#[derive(Debug, StructOpt)]

pub enum Action {

    List,

    Add {

        #[structopt()]

        text: String,

    },

    Done {

        #[structopt()]

        index: usize,

    },

}



#[derive(Debug, StructOpt)]

#[structopt(name = "rusty-todo", about = "A command line todo app")]

pub struct CommandLineOptions {

    #[structopt(subcommand)]

    action: Action,

    #[structopt(parse(from_os_str), short = "p", long = "path")]

    json_file_path: Option<PathBuf>,

}
```

- main.rs

```Rust
mod cli;

use cli::*;

use structopt::StructOpt;



fn main() {

    let CommandLineOptions {

        action,

        json_file_path,

    } = CommandLineOptions::from_args();



    println!("JSON file path: {:?}", json_file_path);

    match action {

        Action::List => println!("List all"),

        Action::Add { text } => println!("Add: {:?}", text),

        Action::Done { index } => println!("Done: {:?}", index),

    }

}
```

#### è¿è¡Œ

> ```
> cargo run -- add "Rust sharing for genius bytedancers"
> ```

![img](./insights_about_rust.assets/20211228220156043.png)

1. ### åŠŸèƒ½å®ç°ï¼šHappy CRUD ğŸš€

- #### è®¾è®¡æ•°æ®ç»“æ„

```Rust
use chrono::{DateTime, Utc};



pub struct Task {

    pub text: String,

    pub created_at: DateTime<Utc>,

}
use chrono::{serde::ts_seconds, DateTime, Utc};

use serde::{Deserialize, Serialize};



#[derive(Debug, Deserialize, Serialize)]

pub struct Task {

    pub text: String,

    #[serde(with = "ts_seconds")]

    pub created_at: DateTime<Utc>,

}



impl Task {

    pub fn new(text: String) -> Self {

        Self {

            text,

            created_at: Utc::now(),

        }

    }

}
```

- #### æ·»åŠ ä»»åŠ¡

  - task.rs

```Rust
pub fn add_task(task: Task, json_file_path: PathBuf) -> Result<()> {

    let file = OpenOptions::new()

        .read(true)

        .write(true)

        .create(true)

        .open(json_file_path)?;

    let mut tasks = parse_tasks(&file)?;

    tasks.push(task);

    serde_json::to_writer(&file, &tasks)?;

    Ok(())

}



fn parse_tasks(file: &std::fs::File) -> Result<Vec<Task>> {

    let reader = BufReader::new(file);

    let tasks = serde_json::from_reader(reader)?;

    Ok(tasks)

}
```

- main.rs

```Rust
mod cli;

mod tasks;

use anyhow::{anyhow, Result};

use cli::*;

use std::path::PathBuf;

use structopt::StructOpt;

use tasks::*;



fn main() -> Result<()> {

    let CommandLineOptions {

        action,

        json_file_path,

    } = CommandLineOptions::from_args();



    let json_file_path = json_file_path

        .or_else(default_json_file_path)

        .ok_or(anyhow!("æ–‡ä»¶è·¯å¾„æŸ¥æ‰¾å¤±è´¥"))?;

    match action {

        Action::List => println!("List all"),

        Action::Add { text } => add_task(Task::new(text), json_file_path)?,

        Action::Done { index } => println!("Done: {:?}", index),

    }

    Ok(())

}



fn default_json_file_path() -> Option<PathBuf> {

    home::home_dir().map(|mut path| {

        path.push(".rusty-todo.json");

        path

    })

}
```

##### è¿è¡Œ

> cargo run -- add "Rust sharing for genius bytedancers"

![img](./insights_about_rust.assets/20211228220243740.png)

é»˜è®¤ç”¨æˆ·ç›®å½•ä¸‹ï¼š

![img](./insights_about_rust.assets/20211228220303915.png)

ğŸ‰ğŸ‰ğŸ‰ æ·»åŠ ä»»åŠ¡æˆåŠŸ

![img](./insights_about_rust.assets/20211228220327273.png)

- #### æŸ¥çœ‹ä»»åŠ¡

  - tasks.rs

```Rust
impl Display for Task {

    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {

        write!(f, "{:<50} [{}]", self.text, self.created_at)

    }

}



pub fn list_tasks(json_file_path: PathBuf) -> Result<()> {

    let file = OpenOptions::new().read(true).open(json_file_path)?;

    let tasks = parse_tasks(&file)?;

    if tasks.is_empty() {

        println!("å¾…åŠäº‹é¡¹ä¸ºç©ºï¼Œå¥½å¥½ä¼‘æ¯ä¸‹å§ï½ğŸ‰")

    } else {

        for (index, task) in tasks.into_iter().enumerate() {

            println!("{}: {}", index, task);

        }

    }

    Ok(())

}
```

- main.rs

```Rust
    match action {

        Action::List => list_tasks(json_file_path)?,

        Action::Add { text } => add_task(Task::new(text), json_file_path)?,

        Action::Done { index } => println!("Done: {:?}", index),

    }
```

##### è¿è¡Œ

> cargo run -- list

![img](./insights_about_rust.assets/20211228220358004.png)

- #### åˆ é™¤ä»»åŠ¡

ç•¥ï¼šåŠ¨æ‰‹å°è¯•ä¸‹å§ï¼

> é™„ï¼š[æŸ¥é˜…](https://github.com/Binlogo/playground-rs/tree/master/rusty-journal)æ­¤æ¬¡ Live Coding ä»£ç 

# å‚è€ƒ

- [2021å¹´ Rust è¡Œä¸šè°ƒç ”æŠ¥å‘Š-InfoQ](https://www.infoq.cn/article/umqbighceoa81yij7uyg)

- [æ£’æ£’å½¬çš„ç¬¬äºŒå¤§è„‘-ç¼–ç¨‹è¯­è¨€-Rust](https://binlogo.github.io/Knowledge-Track/programming-languages/rust/rust.html)

- [GitHub - Binlogo/rust-on-mobile: Rust åœ¨ç§»åŠ¨è·¨å¹³å°çš„å®è·µ](https://github.com/binlogo/rust-on-mobile)

- [CS 110L: Safety in Systems Programming](https://binlogo.github.io/Knowledge-Track/cs/class/cs110l.html)

- [ç¨‹åºå›çš„ Rust åŸ¹è®­è¯¾](https://tyrchen.github.io/rust-training/rust-training-all-in-one-cn.html)

- [Rust on Exercism](https://exercism.org/tracks/rust)

- [Rust in Action: Systems programming concepts and techniques](https://livebook.manning.com/book/rust-in-action)

- [é™ˆå¤© Â· Rust ç¼–ç¨‹ç¬¬ä¸€è¯¾](http://gk.link/a/10CqG) ï¼ˆ[é™ˆå¤©](https://github.com/tyrchen)çš„è¯¾ç¨‹è´¨é‡éå¸¸é«˜ï¼Œæ·±å…¥æµ…å‡ºï¼Œè®¤çœŸæ¨èğŸŒŸï¼‰

> æ¬¢è¿ä½¿ç”¨æˆ‘çš„äºŒç»´ç ï¼Œæˆ‘å°†è·å¾—åŠæ¯å’–å•¡ ğŸ˜

![img](./insights_about_rust.assets/20211228220423460.png)

