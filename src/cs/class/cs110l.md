# CS 110L: Safety in Systems Programming

[æ–¯å¦ç¦å¤§å­¦ï¼šç³»ç»Ÿç¼–ç¨‹çš„å®‰å…¨æ€§]((https://web.stanford.edu/class/cs110l/))

### å†…å­˜å®‰å…¨å’Œ Rust åŸºç¡€çŸ¥è¯†

- ä»€ä¹ˆæ˜¯å†…å­˜å®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆåœ¨ C å’Œ C++ ä¸­å­˜åœ¨å†…å­˜å®‰å…¨é—®é¢˜ï¼Ÿ
- å¯ä»¥ä½¿ç”¨å“ªäº›å·¥å…·æ¥æŸ¥æ‰¾ C/C++ ä»£ç ä¸­çš„é—®é¢˜ï¼Ÿ
- å…¶ä»–ç¼–ç¨‹è¯­è¨€å¦‚ä½•å¸®åŠ©æˆ‘ä»¬é¿å…åœ¨ç¨‹åºä¸­å‡ºé”™ï¼Ÿ
- Rust çš„å†…å­˜æ¨¡å‹ï¼šæ‰€æœ‰æƒã€ç”Ÿå‘½å‘¨æœŸã€å¼•ç”¨ï¼ˆæ™ºèƒ½æŒ‡é’ˆ&å€Ÿç”¨ï¼‰
- C++ ä¸­çš„ [RAII](https://zh.wikipedia.org/zh-cn/RAII)ï¼Œä»¥åŠå®ƒä¸ Rust çš„æ¯”è¾ƒ

> RAII: Resource Acquisition Is Initialization, èµ„æºè·å–å³åˆå§‹åŒ–

### å¦‚ä½•æ„å»ºå¥½çš„ä»£ç ï¼Ÿ

- `null` çš„é™·é˜±ï¼›ä»¥åŠ Rust ä¸­çš„ `Option` & `Result`
- Rust ä¸­çš„æšä¸¾
- ä¸åŒçš„æŠ½è±¡æ–¹å¼ï¼šé¢å‘ç‰¹å¾ï¼ˆ`trait`ï¼‰/åè®®ç¼–ç¨‹ vs. é¢å‘å¯¹è±¡ç¼–ç¨‹

### é¿å…å¤šè¿›ç¨‹é™·é˜±

- ç®¡é“ï¼ˆpipeï¼‰çš„ç®¡ç†ï¼šå¦‚ä½•é¿å…èµ„æºæ³„æ¼?
- ä¿¡å·å¤„ç†ï¼šä¸ºä»€ä¹ˆè¿™ä¹ˆéš¾åšå¥½ï¼Ÿæ€æ ·æ‰èƒ½åšå¾—æ›´å¥½ï¼Ÿ

### é¿å…å¤šçº¿ç¨‹é™·é˜±

- åœ¨çº¿ç¨‹ä¸Šä¸‹æ–‡ä¸­é‡æ–°å®¡è§†å†…å­˜å®‰å…¨
- å¦‚ä½•ä½¿ç”¨ Rust çš„å†…å­˜æ¨¡å‹æ¥é˜²æ­¢ç«äº‰æ¡ä»¶ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹åˆé˜²æ­¢ä¸äº†ï¼Ÿ
- é”ï¼ˆMutexesï¼‰, è‡ªåŠ¨å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆï¼ˆarc pointersï¼‰, ä¿¡å·é‡ï¼ˆsemaphoresï¼‰, æ¡ä»¶å˜é‡ï¼ˆcondition variablesï¼‰
- æ¶ˆæ¯ä¼ é€’ä½œä¸ºä¼ ç»Ÿå…±äº«å†…å­˜çš„æ›¿ä»£æ–¹æ¡ˆ

### å®éªŒè¯¾ï¼šç½‘ç»œç³»ç»Ÿ

- å¤„ç†å’Œå‘é€ HTTP è¯·æ±‚
- å®ç°å¤šçº¿ç¨‹æœåŠ¡å™¨
- åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è´Ÿè½½å¹³è¡¡ã€æ•…éšœå¤„ç†
- éé˜»å¡ I/Oï¼› Rust ä¸­çš„ async/awaitå’Œ`future`

## è¯¾ç¨‹è®²ä¹‰

- [x] [#01: Welcome to CS 110L](https://web.stanford.edu/class/cs110l/slides/lecture-01.pdf)
- [x] [#02: Program Analysis](https://web.stanford.edu/class/cs110l/slides/lecture-02.pdf)
    - åŠ¨æ€åˆ†æï¼ˆDynamic Analysisï¼‰
        - Fuzzingï¼Œæ¨¡ç³Šæµ‹è¯•
        - [llvm - libFuzzer](https://llvm.org/docs/LibFuzzer.html)
        - [Google - OSS-Fuzz](https://github.com/google/oss-fuzz)
    - é™æ€åˆ†æï¼ˆStatic Analysisï¼‰
        - "linting", [llvm - clang-tidy](https://clang.llvm.org/extra/clang-tidy/)
        - æ•°æ®æµï¼ˆDataflowï¼‰åˆ†æï¼Œåˆ†æ”¯åˆ¤æ–­
        - å±€é™ï¼šä¸Šä¸‹æ–‡æœ‰é™ï¼Œå®é™…åœºæ™¯ä¸‹å¾ˆå¤šé—®é¢˜éƒ½æ— æ³•è¢«å‘ç°
    - Precondition & Postcondition, ä¸€è‡´æ€§ç»´æŠ¤ï¼Œe.g: `strncpy()`
        - C/C++ è¯­è¨€ä¸­ï¼Œè¿™ç§ä¸€è‡´æ€§ç»´æŠ¤ä¿è¯å–å†³äºå¼€å‘è€…ï¼Œæ˜¯å¦èƒ½å¤Ÿè®©ç¼–è¯‘å™¨/é™æ€åˆ†æå™¨ä¿è¯ï¼Ÿ
        - å…³é”®ï¼šC è¯­è¨€è¯¸å¤šæ¡ä»¶æ— æ³•è¡¨è¾¾
    - ç±»å‹ç³»ç»Ÿï¼ˆType Systemï¼‰
        - C è¯­è¨€ç±»å‹ç³»ç»Ÿï¼š**Simple != easy**
        - å¦‚ä½•é€šè¿‡ç±»å‹ç³»ç»Ÿåœ¨ä»£ç ä¸­è¡¨è¾¾&ç»´æŠ¤å‰/åç½®æ¡ä»¶ï¼Ÿ
        - Nextï¼šMeet [Rust ğŸ¦€ï¸](../../programming-languages/rust/rust.md)
- [ ] [#03: Memory Safety](https://web.stanford.edu/class/cs110l/slides/lecture-03.pdf)
    - [ ] [Lecture notes](https://web.stanford.edu/class/cs110l/lecture-notes/lecture-03/)

## éšå ‚ç»ƒä¹ 

- [ğŸš€] [Week 1 Exercises](https://web.stanford.edu/class/cs110l/assignments/week-1-exercises/)
    - è®¤è¯† C/C++ ä¸­ä»£ç åˆ†æå·¥å…·çš„å±€é™æ€§
    - Static analysis: `clang-tidy`
    - Dynamic analysis: `Valgrind`ã€`sanitizers`
    - è®¤è¯† Make ç¼–è¯‘ç³»ç»Ÿï¼š
        - å®šä¹‰å‚æ•°å˜é‡ï¼š
            - `CC` å’Œ `CXX` æŒ‡å®š C/C++ ç¼–è¯‘å™¨ï¼Œ
            - `CFLAGS` å’Œ `CXXFLAGS` æŒ‡å®šç¼–è¯‘å™¨ä¼ å‚
            - `LDFLAGS` æŒ‡å®šé“¾æ¥å™¨ä¼ å‚
        - å®šä¹‰æ‰§è¡Œç›®æ ‡ï¼š
            - `default` é»˜è®¤æ‰§è¡Œ
        - æ™¦æ¶©ã€è‰°æ·±ï¼Œä½†å¯è¡Œã€‚æœ‰æ›´å¤šç°ä»£ç¼–è¯‘ç³»ç»Ÿæ›¿ä»£ã€‚
    - æ›´æ–° Makefile æ”¯æŒ sanitizers